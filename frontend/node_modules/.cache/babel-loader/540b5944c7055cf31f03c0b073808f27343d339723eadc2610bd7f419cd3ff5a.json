{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hp\\\\Documents\\\\userloginregister\\\\frontend\\\\src\\\\components\\\\Pages\\\\Home.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport userService from '../../services/user';\nimport authService from '../../services/auth';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Home = () => {\n  _s();\n  const [users, setUsers] = useState([]);\n  const [loading, setLoading] = useState(true); // State to manage loading state\n  const [updatingUserId, setUpdatingUserId] = useState(null);\n  const [name, setName] = useState('');\n  const [mobileNumber, setMobileNumber] = useState('');\n  const [password, setPassword] = useState('');\n  const currentUser = authService.getCurrentUser();\n  useEffect(() => {\n    const fetchUsers = async () => {\n      try {\n        if (currentUser && currentUser.token) {\n          // Check if currentUser and token are valid\n          const userList = await userService.getUsers(currentUser.token);\n          setUsers(userList);\n        }\n      } catch (err) {\n        console.error(err.message);\n      } finally {\n        setLoading(false); // Set loading to false after fetching users\n      }\n    };\n    fetchUsers();\n  }, []); // Include currentUser in the dependency array\n\n  const handleDelete = async id => {\n    try {\n      await userService.deleteUser(id, currentUser.token);\n      setUsers(users.filter(user => user._id !== id));\n    } catch (err) {\n      console.error(err.message);\n    }\n  };\n  const handleUpdateStart = user => {\n    setUpdatingUserId(user._id);\n    setName(user.name);\n    setMobileNumber(user.mobileNumber);\n    // Assuming password can also be updated, initialize it if needed\n    setPassword('');\n  };\n  const handleUpdateCancel = () => {\n    setUpdatingUserId(null);\n    setName('');\n    setMobileNumber('');\n    setPassword('');\n  };\n  const handleUpdateSubmit = async () => {\n    try {\n      const updatedUserData = {\n        name,\n        mobileNumber,\n        password // Include password if needed\n      };\n      const updatedUser = await userService.updateUser(updatingUserId, updatedUserData, currentUser.token);\n      setUsers(users.map(user => user._id === updatingUserId ? updatedUser : user));\n      setUpdatingUserId(null);\n      setName('');\n      setMobileNumber('');\n      setPassword('');\n    } catch (err) {\n      console.error(err.message);\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 12\n    }, this); // Render loading state while fetching data\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Home\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: users.map(user => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [user.name, \" - \", user.mobileNumber, /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleDelete(user._id),\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 13\n        }, this), updatingUserId === user._id ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Name\",\n            value: name,\n            onChange: e => setName(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            placeholder: \"Mobile Number\",\n            value: mobileNumber,\n            onChange: e => setMobileNumber(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            placeholder: \"Password\",\n            value: password,\n            onChange: e => setPassword(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleUpdateSubmit(),\n            children: \"Submit Update\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleUpdateCancel(),\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 15\n        }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleUpdateStart(user),\n          children: \"Update\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 15\n        }, this)]\n      }, user._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 5\n  }, this);\n};\n_s(Home, \"Zj/qeSXZkluR1m+rWRlhxp2Okvg=\");\n_c = Home;\nexport default Home;\nvar _c;\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["React","useEffect","useState","userService","authService","jsxDEV","_jsxDEV","Home","_s","users","setUsers","loading","setLoading","updatingUserId","setUpdatingUserId","name","setName","mobileNumber","setMobileNumber","password","setPassword","currentUser","getCurrentUser","fetchUsers","token","userList","getUsers","err","console","error","message","handleDelete","id","deleteUser","filter","user","_id","handleUpdateStart","handleUpdateCancel","handleUpdateSubmit","updatedUserData","updatedUser","updateUser","map","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","type","placeholder","value","onChange","e","target","_c","$RefreshReg$"],"sources":["C:/Users/hp/Documents/userloginregister/frontend/src/components/Pages/Home.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport userService from '../../services/user';\nimport authService from '../../services/auth';\n\nconst Home = () => {\n  const [users, setUsers] = useState([]);\n  const [loading, setLoading] = useState(true); // State to manage loading state\n  const [updatingUserId, setUpdatingUserId] = useState(null);\n  const [name, setName] = useState('');\n  const [mobileNumber, setMobileNumber] = useState('');\n  const [password, setPassword] = useState('');\n  const currentUser = authService.getCurrentUser();\n\n  useEffect(() => {\n    const fetchUsers = async () => {\n      try {\n        if (currentUser && currentUser.token) { // Check if currentUser and token are valid\n          const userList = await userService.getUsers(currentUser.token);\n          setUsers(userList);\n        }\n      } catch (err) {\n        console.error(err.message);\n      } finally {\n        setLoading(false); // Set loading to false after fetching users\n      }\n    };\n\n    fetchUsers();\n  }, []); // Include currentUser in the dependency array\n\n  const handleDelete = async (id) => {\n    try {\n      await userService.deleteUser(id, currentUser.token);\n      setUsers(users.filter(user => user._id !== id));\n    } catch (err) {\n      console.error(err.message);\n    }\n  };\n  const handleUpdateStart = (user) => {\n    setUpdatingUserId(user._id);\n    setName(user.name);\n    setMobileNumber(user.mobileNumber);\n    // Assuming password can also be updated, initialize it if needed\n    setPassword('');\n  };\n\n  const handleUpdateCancel = () => {\n    setUpdatingUserId(null);\n    setName('');\n    setMobileNumber('');\n    setPassword('');\n  };\n\n  const handleUpdateSubmit = async () => {\n    try {\n      const updatedUserData = {\n        name,\n        mobileNumber,\n        password, // Include password if needed\n      };\n      const updatedUser = await userService.updateUser(updatingUserId, updatedUserData, currentUser.token);\n      setUsers(users.map(user => user._id === updatingUserId ? updatedUser : user));\n      setUpdatingUserId(null);\n      setName('');\n      setMobileNumber('');\n      setPassword('');\n    } catch (err) {\n      console.error(err.message);\n    }\n  };\n\n\n  if (loading) {\n    return <div>Loading...</div>; // Render loading state while fetching data\n  }\n \n\n \n  return (\n    <div>\n      <h2>Home</h2>\n      <ul>\n        {users.map(user => (\n          <li key={user._id}>\n            {user.name} - {user.mobileNumber}\n            <button onClick={() => handleDelete(user._id)}>Delete</button>\n            {updatingUserId === user._id ? (\n              <div>\n                <input\n                  type=\"text\"\n                  placeholder=\"Name\"\n                  value={name}\n                  onChange={(e) => setName(e.target.value)}\n                />\n                <input\n                  type=\"text\"\n                  placeholder=\"Mobile Number\"\n                  value={mobileNumber}\n                  onChange={(e) => setMobileNumber(e.target.value)}\n                />\n                {/* Include password input if needed */}\n                <input\n                  type=\"password\"\n                  placeholder=\"Password\"\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                />\n                <button onClick={() => handleUpdateSubmit()}>Submit Update</button>\n                <button onClick={() => handleUpdateCancel()}>Cancel</button>\n              </div>\n            ) : (\n              <button onClick={() => handleUpdateStart(user)}>Update</button>\n            )}\n          </li>\n        ))}\n      </ul>\n      \n    </div>\n  );\n};\n\nexport default Home;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}